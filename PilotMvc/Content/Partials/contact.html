<loading></loading>
<menu></menu>
<div class="container">
    <div class="col-xs-12">

        <div ng-controller="ContactController" class="clearfix">

            <div class="alert alert-danger" ng-cloak ng-show="error">
                <strong>Oh snap!</strong> {{ error }}
            </div>
            <div class="alert alert-success" ng-cloak ng-show="success">
                <strong>Oh snap!</strong> {{ success }}
            </div>

            <div class="row">
                <div class="col-xs-12 col-md-6">
                    <form name="addContact" class="pure-form pure-form-aligned">
                        <div class="form-group">
                            <file-upload file="myFile" path-key="ProfilePath" show-progress="true"></file-upload>
                        </div>

                        <div class="form-group" ng-show="myFile.fileData.Size > 0">
                            <label>Member</label>
                            <select ng-model="contact.Member" required ng-options="member.FirstName for member in members" class="form-control">
                                <option value="">-- choose member --</option>
                            </select>
                        </div>

                        <div class="form-group" ng-show="myFile.fileData.Size > 0">
                            <label>Contact type</label>
                            <select ng-model="contact.Type" required ng-options="type.Description for type in contactTypes" class="form-control">
                                <option value="">-- choose contact type --</option>
                            </select>
                        </div>

                        <div class="form-group" ng-show="myFile.fileData.Size > 0">
                            <label>Contact</label>
                            <input type="text" ng-model="contact.Value" required class="form-control"/>
                        </div>

                        <div class="form-group" ng-show="myFile.fileData.Size > 0">
                            <input type="submit" value="Add" ng-click="create()" ng-disabled="!addContact.$valid" class="btn btn-primary" />
                            <input type="button" value="Cancel" ng-click="clear()" class="btn" />
                        </div>
                    </form>
                </div>

                <div class="col-xs-12 col-md-6">
                    <form>
                        <fieldset>
                            <input type="text" placeholder="Search" ng-model="textFilter" class="form-control"/>
                        </fieldset>
                    </form>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Type</th>
                                <th>Value</th>
                                <th>Member</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="entity in contactsOut" ng-cloak>
                                <td><strong>{{ entity.Id }}</strong></td>
                                <td>
                                    <p>{{ entity.Type.Description }}</p>
                                </td>
                                <td>
                                    <p>{{ entity.Value }}</p>
                                </td>
                                <td>
                                    <p>{{ entity.Member.FirstName }} {{ entity.Member.LastName }}</p>
                                </td>
                                <td>
                                    <p><a ng-click="delete(entity, $index)" href="javascript:;">Delete</a></p>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5">
                                    <pagination in-list="contacts"
                                        out-list="contactsOut"
                                        page-size="pageSize"
                                        current-page="currentPage"
                                        search-query="textFilter"
                                        type="small"
                                        class="pull-right"></pagination>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>
